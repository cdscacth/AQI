<!DOCTYPE html>
<html>

	<head>
		<title>Aktueller AQI an der CDSC</title>
		<meta charset="utf-8" />
		<meta name="msapplication-TileColor" content="#E59866" />
		<meta name="msapplication-square150x150logo" content="images/icon.png" />
		<link rel="prefetch" href="style.css?v=1.2" />
		<link rel="prefetch" href="images/gras.jpg" />
		<link rel="prefetch" href="images/icon.png" />
		<link rel="prefetch" href="images/00ff00.png" />
		<link rel="prefetch" href="images/ffff00.png" />
		<link rel="prefetch" href="images/ff9900.png" />
		<link rel="prefetch" href="images/ff0000.png" />
		<link rel="prefetch" href="images/cc0000.png" />
		<link rel="prefetch" href="images/674ea7.png" />
		<link rel="prefetch" href="images/000000.png" />
		<link rel="stylesheet" type="text/css" href="style.css?v=1.2" />
		<link id="ico" rel="shortcut icon" href="images/icon.png" />
		<script src="js/Chart.bundle.min.js"></script>
		<script src="js/localforage.min.js"></script>
		<script src="js/aqi.js"></script>
		<script type="text/javascript">
			async function displayData() {
				document.getElementById("36zeit").innerHTML = await localforage.getItem("36zeit");
				document.getElementById("36pm25").innerHTML = await localforage.getItem("36pm25");
				document.getElementById("36pm10").innerHTML = await localforage.getItem("36pm10");
				document.getElementById("36aqi25").innerHTML = await localforage.getItem("36aqi25");
				document.getElementById("36aqi10").innerHTML = await localforage.getItem("36aqi10");
				document.getElementById("AQI2536").style.backgroundColor = await localforage.getItem("AQI2536.style.backgroundColor");
				document.getElementById("AQI1036").style.backgroundColor = await localforage.getItem("AQI1036.style.backgroundColor");
				document.getElementById("AQI2536").style.color = await localforage.getItem("AQI2536.style.color");
				document.getElementById("AQI1036").style.color = await localforage.getItem("AQI1036.style.color");

				document.getElementById("CDSCzeit").innerHTML = await localforage.getItem("CDSCzeit");
				document.getElementById("CDSCpm25").innerHTML = await localforage.getItem("CDSCpm25");
				document.getElementById("CDSCpm10").innerHTML = await localforage.getItem("CDSCpm10");
				document.getElementById("CDSCaqi25").innerHTML = await localforage.getItem("CDSCaqi25");
				document.getElementById("CDSCaqi10").innerHTML = await localforage.getItem("CDSCaqi10");
				document.getElementById("AQI25CDSC").style.backgroundColor = await localforage.getItem("AQI25CDSC.style.backgroundColor");
				document.getElementById("AQI10CDSC").style.backgroundColor = await localforage.getItem("AQI10CDSC.style.backgroundColor");
				document.getElementById("AQI25CDSC").style.color = await localforage.getItem("AQI25CDSC.style.color");
				document.getElementById("AQI10CDSC").style.color = await localforage.getItem("AQI10CDSC.style.color");

				document.getElementById("GISzeit").innerHTML = await localforage.getItem("GISzeit");
				document.getElementById("GISpm25").innerHTML = await localforage.getItem("GISpm25");
				document.getElementById("GISpm10").innerHTML = await localforage.getItem("GISpm10");
				document.getElementById("GISaqi25").innerHTML = await localforage.getItem("GISaqi25");
				document.getElementById("GISaqi10").innerHTML = await localforage.getItem("GISaqi10");
				document.getElementById("AQI25GIS").style.backgroundColor = await localforage.getItem("AQI25GIS.style.backgroundColor");
				document.getElementById("AQI10GIS").style.backgroundColor = await localforage.getItem("AQI10GIS.style.backgroundColor");
				document.getElementById("AQI25GIS").style.color = await localforage.getItem("AQI25GIS.style.color");
				document.getElementById("AQI10GIS").style.color = await localforage.getItem("AQI10GIS.style.color");

				document.getElementById("AQIavg25").innerHTML = await localforage.getItem("AQIavg25");
				document.getElementById("AQIavg10").innerHTML = await localforage.getItem("AQIavg10");

				document.getElementById("AQI").innerHTML = await localforage.getItem("AQI");
				document.getElementById("AQItr").style.backgroundColor = await localforage.getItem("AQItr.style.backgroundColor");
				document.getElementById("AQItr").style.color = await localforage.getItem("AQItr.style.color");

				document.getElementById("colordesc").innerHTML = await localforage.getItem("colordesc");
				document.getElementById("action").innerHTML = await localforage.getItem("action");
				document.getElementById("action").style.textAlign = await localforage.getItem("action.style.textAlign");
				document.getElementById("action").style.paddingLeft = await localforage.getItem("action.style.paddingLeft");
				document.getElementById("actionextra").innerHTML = await localforage.getItem("actionextra");
				document.getElementById("info-footer").style.backgroundColor = await localforage.getItem("info-footer.style.backgroundColor");
				document.getElementById("info-footer").style.color = await localforage.getItem("info-footer.style.color");
				document.getElementById("info-header").style.backgroundColor = await localforage.getItem("info-header.style.backgroundColor");
				document.getElementById("info-header").style.color = await localforage.getItem("info-header.style.color");
			}

			window.onload = chart();
			setInterval(chart, 60000);

			localforage.clear();
			getData();
			setInterval(getData, 60000);
		</script>
	</head>

	<body>
		<div id="main">
			<h1 style="font-size: 250%">Aktueller AQI an der CDSC</h1>

			<div id="time" style="display: none"></div>
			<table class="border">
				<tr id="AQI25tr" class="bg" style="display: none">
					<td>
						<div class="text">End-AQI (PM2.5)</div>
						<div id="AQIavg25">Laden...</div>
					</td>
				</tr>
				<tr id="AQI10tr" class="bg" style="display: none">
					<td>
						<div class="text">End-AQI (PM10)</div>
						<div id="AQIavg10">Laden...</div>
					</td>
				</tr>
				<tr id="AQItr" class="bg" style="font-size: 200%">
					<td>

						<div class="text">AQI<button id="openInfo">i</button></div>
						<div id="AQI">Laden...</div>
					</td>
				</tr>
			</table>
			<br>
			<br>
			<div id="CDSCzeit">Laden...</div><br>
			<table class="border">
				<tr>
					<td class="bg" style="width: 50%;">
						<div class="text">PM2.5 CDSC</div>
						<div id="CDSCpm25">Laden...</div>
					</td>
					<td id="AQI25CDSC" class="bg">
						<div class="text">AQI PM2.5 CDSC</div>
						<div id="CDSCaqi25">Laden...</div>
					</td>
				</tr>
				<tr>
					<td class="bg">
						<div class="text">PM10 CDSC</div>
						<div id="CDSCpm10">Laden...</div>
					</td>
					<td id="AQI10CDSC" class="bg">
						<div class="text">AQI PM10 CDSC</div>
						<div id="CDSCaqi10">Laden...</div>
					</td>
				</tr>
			</table>
			<br>
			<canvas id="ChartCDSC" height="100"></canvas>
			<br>
			<div id="GISzeit">Laden...</div><br>
			<table class="border">
				<tr>
					<td class="bg" style="width: 50%;">
						<div class="text">PM2.5 GIS</div>
						<div id="GISpm25">Laden...</div>
					</td>
					<td id="AQI25GIS" class="bg">
						<div class="text">AQI PM2.5 GIS</div>
						<div id="GISaqi25">Laden...</div>
					</td>
				</tr>
				<tr>
					<td class="bg">
						<div class="text">PM10 GIS</div>
						<div id="GISpm10">Laden...</div>
					</td>
					<td id="AQI10GIS" class="bg">
						<div class="text">AQI PM10 GIS</div>
						<div id="GISaqi10">Laden...</div>
					</td>
				</tr>
			</table>
			<br>

			<div id="36zeit">Laden...</div><br>
			<table class="border">
				<tr>
					<td class="bg" style="width: 50%">
						<div class="text">PM2.5 36t</div>
						<div id="36pm25">Laden...</div>
					</td>
					<td id="AQI2536" class="bg">
						<div class="text">AQI PM2.5 36t</div>
						<div id="36aqi25">Laden...</div>
					</td>
				</tr>
				<tr>
					<td class="bg">
						<div class="text">PM10 36t</div>
						<div id="36pm10">Laden...</div>
					</td>
					<td id="AQI1036" class="bg">
						<div class="text">AQI PM10 36t</div>
						<div id="36aqi10">Laden...</div>
					</td>
				</tr>
			</table>
			<br>
			<hr>
			<div id="Quelle">
				<table>
					<tr>
						<td id="links"><b>Quelle PM2.5/PM10 Werte</b>: <br><a href="http://aq.ajosoft.com/index.php?StationID=2053" target="_blank">CDSC</a>, <a href="http://aq.ajosoft.com/index.php?StationID=2052" target="_blank">GIS</a>, <a href="http://aqmthai.com/public_report.php?lang=en" target="_blank">36t</a></td>
						<td id="rechts"><b>Quelle AQI Berechnung</b>: <a href="http://www3.epa.gov/pm/2012/decfsstandards.pdf" target="_blank">EPA</a>/<a href="https://en.wikipedia.org/wiki/Air_quality_index#Computing_the_AQI" target="_blank">Wikipedia</a></td>
					</tr>
				</table>
			</div><br>
			<div id="aPinat" style="color: white; text-align: left; font-size: 150%"><i>&#8211; aPinat</i></div>
		</div>
		<div id="infobox">
			<div id="info-content">
				<div id="info-header">
					<span id="close">&times;</span>
					<i><h2 id="colordesc">Laden...</h2></i>
				</div>
				<div id="info-body">
					<p id="action">Laden...</p>
				</div>
				<div id="info-footer">
					<div id="actionextra">
						Laden...
					</div>
				</div>
			</div>

		</div>
	</body>
	<script type="text/javascript">
		var modal = document.getElementById('infobox');
		var btn = document.getElementById("openInfo");
		var span = document.getElementById("close");

		btn.onclick = function() {
			modal.style.display = "block";
		}

		span.onclick = function() {
			modal.style.display = "none";
		}

		window.onclick = function(event) {
			if (event.target == modal) {
				modal.style.display = "none";
			}
		}
	</script>

</html>